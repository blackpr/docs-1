"use strict";(self.webpackChunkplatformatic_oss_website=self.webpackChunkplatformatic_oss_website||[]).push([[87715],{34830:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>c,contentTitle:()=>r,default:()=>m,frontMatter:()=>o,metadata:()=>s,toc:()=>d});var i=n(74848),a=n(28453);const o={},r="Programmatic API",s={id:"runtime/programmatic",title:"Programmatic API",description:"Using the @platformatic/runtime API, you can start Platformatic applications programmatically, bypassing the command line. This API facilitates interaction with various application types such as service, db, composer, and runtime, simplifying operations across different services.",source:"@site/versioned_docs/version-1.42.0/runtime/programmatic.md",sourceDirName:"runtime",slug:"/runtime/programmatic",permalink:"/docs/1.42.0/runtime/programmatic",draft:!1,unlisted:!1,editUrl:"https://github.com/platformatic/oss/edit/main/versioned_docs/version-1.42.0/runtime/programmatic.md",tags:[],version:"1.42.0",frontMatter:{},sidebar:"docs",previous:{title:"Configuration",permalink:"/docs/1.42.0/runtime/configuration"},next:{title:"Overview",permalink:"/docs/1.42.0/service/overview"}},c={},d=[{value:"<code>buildServer()</code>",id:"buildserver",level:2},{value:"Custom Configuration",id:"custom-configuration",level:2},{value:"<code>loadConfig()</code>",id:"loadconfig",level:2},{value:"<code>start()</code>",id:"start",level:2},{value:"<code>startCommand()</code>",id:"startcommand",level:2}];function l(e){const t={a:"a",code:"code",h1:"h1",h2:"h2",p:"p",pre:"pre",...(0,a.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(t.h1,{id:"programmatic-api",children:"Programmatic API"}),"\n",(0,i.jsxs)(t.p,{children:["Using the ",(0,i.jsx)(t.code,{children:"@platformatic/runtime"})," API, you can start Platformatic applications programmatically, bypassing the command line. This API facilitates interaction with various application types such as ",(0,i.jsx)(t.code,{children:"service"}),", ",(0,i.jsx)(t.code,{children:"db"}),", ",(0,i.jsx)(t.code,{children:"composer"}),", and ",(0,i.jsx)(t.code,{children:"runtime"}),", simplifying operations across different services."]}),"\n",(0,i.jsx)(t.h2,{id:"buildserver",children:(0,i.jsx)(t.code,{children:"buildServer()"})}),"\n",(0,i.jsxs)(t.p,{children:[(0,i.jsx)(t.code,{children:"buildServer"})," function initializes a server based on a configuration object or file. It supports configurations for Platformatic Service, Platformatic DB, Platformatic Composer, and any other applications developed on top of ",(0,i.jsx)(t.a,{href:"/docs/1.42.0/service/programmatic",children:"Platformatic Service"}),"."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"import { buildServer } from '@platformatic/runtime'\n\n// Initialize the server using a configuration file\nconst app = await buildServer('path/to/platformatic.runtime.json')\nconst entrypointUrl = await app.start()\n\n// Sample request to the server's entrypoint\nconst res = await fetch(entrypointUrl)\nconsole.log(await res.json())\n\n// Do other interesting things.\n\nawait app.close()\n"})}),"\n",(0,i.jsx)(t.h2,{id:"custom-configuration",children:"Custom Configuration"}),"\n",(0,i.jsx)(t.p,{children:"You can customize your server setup directly within your code by specifying the configuration details:"}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"import { buildServer } from '@platformatic/runtime'\n\nconst config = {\n  // $schema: 'https://platformatic.dev/schemas/v0.39.0/runtime',\n  // $schema: 'https://platformatic.dev/schemas/v0.39.0/service',\n  // $schema: 'https://platformatic.dev/schemas/v0.39.0/db',\n  // $schema: 'https://platformatic.dev/schemas/v0.39.0/composer'\n  ...\n}\nconst app = await buildServer(config)\n\nawait app.start()\n"})}),"\n",(0,i.jsx)(t.h2,{id:"loadconfig",children:(0,i.jsx)(t.code,{children:"loadConfig()"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"loadConfig"})," reads and parses a configuration file for any Platformatic application. It can automatically detect the type of application or accept explicit instructions."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"import { loadConfig } from '@platformatic/runtime'\n\n// Read the configuration and automatically detect the application type.\nconst config = await loadConfig({}, ['-c', '/path/to/platformatic.config.json'])\n\n// Read the config based on command line arguments and provide default configuration if needed\nconst config = await loadConfig(\n  {},\n  ['-c', '/path/to/platformatic.config.json']\n)\n\n// Default config can be specified.\nconst config = await loadConfig(\n  {},\n  ['-c', '/path/to/platformatic.config.json'],\n  { key: 'value' }\n)\n"})}),"\n",(0,i.jsx)(t.h2,{id:"start",children:(0,i.jsx)(t.code,{children:"start()"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"start"})," function loads a configuration, builds and starts a server but does not return the server instance. This function is best suited for scenarios where no further interaction with the server is necessary after launch."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"import { start } from '@platformatic/runtime'\n\nawait start(['-c', '/path/to/platformatic.config.json])\n"})}),"\n",(0,i.jsx)(t.h2,{id:"startcommand",children:(0,i.jsx)(t.code,{children:"startCommand()"})}),"\n",(0,i.jsxs)(t.p,{children:["The ",(0,i.jsx)(t.code,{children:"startCommand"})," function is similar to ",(0,i.jsx)(t.code,{children:"start"}),". However, if an exception\noccurs, ",(0,i.jsx)(t.code,{children:"startCommand"})," logs the error and exits the process. This is different\nfrom ",(0,i.jsx)(t.code,{children:"start"}),", which throws the exception."]}),"\n",(0,i.jsx)(t.pre,{children:(0,i.jsx)(t.code,{className:"language-js",children:"import { startCommand } from '@platformatic/runtime'\n\nawait startCommand(['-c', '/path/to/platformatic.config.json])\n"})})]})}function m(e={}){const{wrapper:t}={...(0,a.R)(),...e.components};return t?(0,i.jsx)(t,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},28453:(e,t,n)=>{n.d(t,{R:()=>r,x:()=>s});var i=n(96540);const a={},o=i.createContext(a);function r(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function s(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:r(e.components),i.createElement(o.Provider,{value:t},e.children)}}}]);