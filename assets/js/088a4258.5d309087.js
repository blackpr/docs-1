"use strict";(self.webpackChunkplatformatic_oss_website=self.webpackChunkplatformatic_oss_website||[]).push([[96655],{28477:(e,t,o)=>{o.r(t),o.d(t,{assets:()=>c,contentTitle:()=>n,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>l});var r=o(74848),s=o(28453);const a={title:"FAQs",label:"Welcome to Platformatic"},n="FAQs",i={id:"FAQs",title:"FAQs",description:"Does Platformatic support the deployment of js projects to Platformatic Cloud via github action?",source:"@site/docs/FAQs.md",sourceDirName:".",slug:"/FAQs",permalink:"/docs/next/FAQs",draft:!1,unlisted:!1,editUrl:"https://github.com/platformatic/platformatic/edit/main/docs/FAQs.md",tags:[],version:"current",frontMatter:{title:"FAQs",label:"Welcome to Platformatic"},sidebar:"Learn",previous:{title:"Glossary",permalink:"/docs/next/learn/glossary"}},c={},l=[{value:"Does Platformatic support the deployment of js projects to Platformatic Cloud via github action?",id:"does-platformatic-support-the-deployment-of-js-projects-to-platformatic-cloud-via-github-action",level:3},{value:"How do I set up a custom authorization strategy in Platformatic?",id:"how-do-i-set-up-a-custom-authorization-strategy-in-platformatic",level:3},{value:"How do I handle dynamic roles in Platformatic?",id:"how-do-i-handle-dynamic-roles-in-platformatic",level:3},{value:"Can I use external services for dynamic role management in Platformatic?",id:"can-i-use-external-services-for-dynamic-role-management-in-platformatic",level:3}];function d(e){const t={a:"a",code:"code",h1:"h1",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h1,{id:"faqs",children:"FAQs"}),"\n",(0,r.jsx)(t.h3,{id:"does-platformatic-support-the-deployment-of-js-projects-to-platformatic-cloud-via-github-action",children:"Does Platformatic support the deployment of js projects to Platformatic Cloud via github action?"}),"\n",(0,r.jsxs)(t.p,{children:["Yes we do! You can see our ",(0,r.jsx)(t.a,{href:"https://github.com/platformatic/onestep",children:"generic yml file"})," and use case on our ",(0,r.jsx)(t.a,{href:"https://docs.platformatic.dev/docs/cli#gh",children:"docs"})]}),"\n",(0,r.jsx)(t.h3,{id:"how-do-i-set-up-a-custom-authorization-strategy-in-platformatic",children:"How do I set up a custom authorization strategy in Platformatic?"}),"\n",(0,r.jsx)(t.p,{children:"To set up a custom authorization strategy in Platformatic, you use the addAuthStrategy method. This method allows you to define how the application should handle user sessions and roles. Here\u2019s an example of setting up a custom authorization strategy:"}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"app.addAuthStrategy({\n  name: 'custom-auth-strategy',\n  createSession: async (req, reply) => {\n    const user = ...\n\n    req.user = { id: user.id, role: user.role }\n  }\n});\n"})}),"\n",(0,r.jsxs)(t.p,{children:["Here, the ",(0,r.jsx)(t.code,{children:"createSession"})," function runs every time there is an HTTP request. It sets up the user session by retrieving the user\u2019s ID and role and assigning them to ",(0,r.jsx)(t.code,{children:"req.user"}),"."]}),"\n",(0,r.jsx)(t.h3,{id:"how-do-i-handle-dynamic-roles-in-platformatic",children:"How do I handle dynamic roles in Platformatic?"}),"\n",(0,r.jsx)(t.p,{children:"If your application uses dynamic roles, such as different roles for different workspaces, you can manage these roles programmatically. Here\u2019s how to approach it:"}),"\n",(0,r.jsxs)(t.ol,{children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Set Up User Roles"}),": In your custom authorization strategy, store the user roles in the req.user object under the X-PLATFORMATIC-ROLE property (this property name can be configured). Use a comma-separated list for multiple roles."]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"req.user = { id: user.id, role: user.roles.join(',') };\n"})}),"\n",(0,r.jsxs)(t.ol,{start:"2",children:["\n",(0,r.jsxs)(t.li,{children:[(0,r.jsx)(t.strong,{children:"Configure Authorization:"}),": To use the roles, configure the authorization settings in Platformatic DB. You can specify the property name for roles using the roleKey configuration."]}),"\n"]}),"\n",(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-yml",children:"authorization:\nroleKey: X-PLATFORMATIC-ROLE\n"})}),"\n",(0,r.jsxs)(t.p,{children:["You can then implement programmatic rules to check the options of the user's workspace, for managing authorizations as ",(0,r.jsx)(t.a,{href:"https://www.cerbos.dev/blog/supercharging-your-policy-rules-with-self-service-custom-roles",children:"outlined here"}),". See the ",(0,r.jsx)(t.a,{href:"https://docs.platformatic.dev/docs/db/configuration/#authorization",children:"Platformatic DB docs"})," on how to use a different roleKey."]}),"\n",(0,r.jsx)(t.h3,{id:"can-i-use-external-services-for-dynamic-role-management-in-platformatic",children:"Can I use external services for dynamic role management in Platformatic?"}),"\n",(0,r.jsxs)(t.p,{children:["Yes, for more complex scenarios where roles vary significantly across different contexts (e.g., different workspaces), you might want to integrate an external service like ",(0,r.jsx)(t.a,{href:"https://github.com/platformatic/fastify-cerbos",children:"Cerbos"})," to handle dynamic role management and authorization. ",(0,r.jsx)(t.a,{href:"https://github.com/platformatic/fastify-cerbos",children:"Cerbos"})," allows you to load roles dynamically and manage authorizations programmatically."]})]})}function u(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},28453:(e,t,o)=>{o.d(t,{R:()=>n,x:()=>i});var r=o(96540);const s={},a=r.createContext(s);function n(e){const t=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function i(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:n(e.components),r.createElement(a.Provider,{value:t},e.children)}}}]);